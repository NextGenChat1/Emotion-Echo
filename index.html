<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emotion Echo - Stylish Interactive</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap');
  body {
    margin:0; padding:0; font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    overflow-x: hidden;
  }
  header {
    padding: 20px;
    font-size: 2rem;
    font-weight: 700;
    text-align: center;
    user-select: none;
    text-shadow: 1px 1px 6px rgba(0,0,0,0.4);
  }
  #question-container {
    background: rgba(255 255 255 / 0.1);
    border-radius: 15px;
    padding: 25px 35px;
    margin: 10px;
    max-width: 500px;
    text-align: center;
    box-shadow: 0 0 30px rgba(0,0,0,0.2);
  }
  #question {
    font-size: 1.3rem;
    margin-bottom: 20px;
    min-height: 60px;
  }
  .btn-group {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 12px;
  }
  button {
    background: #5a3ea1;
    border: none;
    padding: 12px 22px;
    border-radius: 25px;
    font-weight: 600;
    font-size: 1rem;
    color: #fff;
    cursor: pointer;
    transition: background 0.3s ease;
    box-shadow: 0 4px 15px rgba(90, 62, 161, 0.4);
  }
  button:hover {
    background: #8a63d2;
    box-shadow: 0 6px 20px rgba(138, 99, 210, 0.7);
  }
  #result-container {
    margin-top: 25px;
    max-width: 600px;
    text-align: center;
  }
  #result-text {
    font-size: 1.3rem;
    margin-bottom: 15px;
    font-style: italic;
    text-shadow: 1px 1px 8px rgba(0,0,0,0.5);
  }
  #story {
    background: rgba(255 255 255 / 0.15);
    padding: 18px 25px;
    border-radius: 15px;
    font-size: 1rem;
    max-height: 130px;
    overflow-y: auto;
    margin-bottom: 15px;
  }
  #controls {
    margin-top: 15px;
    display: flex;
    justify-content: center;
    gap: 15px;
  }
  #share-buttons button, #download-quote {
    background: #ff5f6d;
    border-radius: 50px;
    padding: 10px 18px;
    font-weight: 700;
    font-size: 0.9rem;
    box-shadow: 0 3px 12px #ff5f6daa;
  }
  #share-buttons button:hover, #download-quote:hover {
    background: #ff7987;
    box-shadow: 0 5px 20px #ff7987cc;
  }
  #lang-switcher {
    margin: 15px 0 30px 0;
    cursor: pointer;
    font-weight: 600;
    font-size: 1.1rem;
    text-decoration: underline;
  }
  #confetti-canvas {
    position: fixed;
    pointer-events: none;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    z-index: 9999;
  }
</style>
</head>
<body>

<header>Emotion Echo ðŸŒŸ</header>

<div id="lang-switcher" title="Click to switch language">Switch to Urdu</div>

<div id="question-container">
  <div id="question">Loading question...</div>
  <div class="btn-group" id="answers"></div>
</div>

<div id="result-container" style="display:none;">
  <div id="result-text"></div>
  <div id="story"></div>
  <div id="controls">
    <button id="back-btn">Back</button>
    <button id="next-btn">Next Question</button>
    <button id="download-quote">Download Quote</button>
  </div>
  <div id="share-buttons">
    <button id="share-twitter">Share on Twitter</button>
    <button id="share-whatsapp">Share on WhatsApp</button>
  </div>
</div>

<canvas id="confetti-canvas"></canvas>

<script>
  // Language data: questions, answers, results, stories, quotes
  const data = {
    en: [
      {
        question: "How are you feeling today?",
        answers: ["Happy", "Sad", "Excited", "Angry", "Calm"],
        results: {
          Happy: "You shine bright like the sun! Keep smiling! â˜€ï¸",
          Sad: "It's okay to feel down sometimes. Better days are coming. ðŸŒ§ï¸",
          Excited: "Your energy is contagious! Go and conquer! âš¡",
          Angry: "Take a deep breath. Calm minds make wise choices. ðŸŒ¬ï¸",
          Calm: "Peace within is the greatest strength. ðŸŒ¿"
        },
        stories: {
          Happy: "Once upon a time, a joyful bird sang songs that made everyone smile.",
          Sad: "A little raindrop fell, but it nourished the beautiful flowers.",
          Excited: "The brave knight galloped fast, ready for a new adventure.",
          Angry: "The fierce tiger learned to breathe deeply and found peace.",
          Calm: "The quiet lake reflected the clear sky, calm and still."
        },
        quotes: [
          "Happiness is a warm puppy. â€“ Charles M. Schulz",
          "The only way out of the labyrinth of suffering is to forgive. â€“ John Green",
          "Energy and persistence conquer all things. â€“ Benjamin Franklin"
        ]
      },
      {
        question: "What motivates you the most?",
        answers: ["Family", "Success", "Adventure", "Helping Others", "Learning"],
        results: {
          Family: "Family is your anchor and your wings.",
          Success: "Success is the result of hard work and passion.",
          Adventure: "Life is an exciting journey full of surprises.",
          Helping Others: "Your kindness makes the world a better place.",
          Learning: "Knowledge is the light that guides your path."
        },
        stories: {
          Family: "A family of birds built a nest where love was the foundation.",
          Success: "A tiny seed grew into a mighty tree with patience and care.",
          Adventure: "The curious cat explored forests beyond its home.",
          Helping Others: "A helping hand changed the life of a stranger.",
          Learning: "The wise owl read books under the moonlight."
        },
        quotes: [
          "Motivation is what gets you started. Habit is what keeps you going. â€“ Jim Ryun",
          "Success usually comes to those who are too busy to be looking for it. â€“ Henry David Thoreau",
          "The biggest adventure you can take is to live the life of your dreams. â€“ Oprah Winfrey"
        ]
      }
      // Add more question sets as needed
    ],
    ur: [
      {
        question: "Ø¢Ø¬ Ø¢Ù¾ Ú©ÛŒØ³Ø§ Ù…Ø­Ø³ÙˆØ³ Ú©Ø± Ø±ÛÛ’ ÛÛŒÚºØŸ",
        answers: ["Ø®ÙˆØ´", "Ø§Ø¯Ø§Ø³", "Ù¾Ø±Ø¬ÙˆØ´", "ØºØµÛ", "Ù¾Ø±Ø§Ù…Ù†"],
        results: {
          "Ø®ÙˆØ´": "Ø¢Ù¾ Ø³ÙˆØ±Ø¬ Ú©ÛŒ Ø·Ø±Ø­ Ø±ÙˆØ´Ù† ÛÛŒÚº! Ù…Ø³Ú©Ø±Ø§ØªÛ’ Ø±ÛÛŒÚº! â˜€ï¸",
          "Ø§Ø¯Ø§Ø³": "Ú©Ø¨Ú¾ÛŒ Ú©Ø¨Ú¾ÛŒ Ø§Ø¯Ø§Ø³ ÛÙˆÙ†Ø§ Ù¹Ú¾ÛŒÚ© ÛÛ’Û” Ø¨ÛØªØ± Ø¯Ù† Ø¢Ø¦ÛŒÚº Ú¯Û’Û” ðŸŒ§ï¸",
          "Ù¾Ø±Ø¬ÙˆØ´": "Ø¢Ù¾ Ú©ÛŒ ØªÙˆØ§Ù†Ø§Ø¦ÛŒ Ù…ØªØ§Ø«Ø± Ú©Ù† ÛÛ’! Ø¢Ú¯Û’ Ø¨Ú‘Ú¾ÛŒÚº! âš¡",
          "ØºØµÛ": "Ú¯ÛØ±ÛŒ Ø³Ø§Ù†Ø³ Ù„ÛŒÚºÛ” Ù¾Ø± Ø³Ú©ÙˆÙ† Ø°ÛÙ† Ø§Ú†Ú¾Û’ ÙÛŒØµÙ„Û’ Ú©Ø±ØªØ§ ÛÛ’Û” ðŸŒ¬ï¸",
          "Ù¾Ø±Ø§Ù…Ù†": "Ø¯Ù„ Ú©ÛŒ Ø³Ú©ÙˆÙ† Ø³Ø¨ Ø³Û’ Ø¨Ú‘ÛŒ Ø·Ø§Ù‚Øª ÛÛ’Û” ðŸŒ¿"
        },
        stories: {
          "Ø®ÙˆØ´": "Ø§ÛŒÚ© Ø®ÙˆØ´ Ù¾Ø±Ù†Ø¯Û ØªÚ¾Ø§ Ø¬Ùˆ Ú¯Ø§Ù†Ø§ Ú¯Ø§ØªØ§ ØªÚ¾Ø§ Ø§ÙˆØ± Ø³Ø¨ Ú©Ùˆ Ø®ÙˆØ´ Ú©Ø±ØªØ§ ØªÚ¾Ø§Û”",
          "Ø§Ø¯Ø§Ø³": "Ú†Ú¾ÙˆÙ¹Ø§ Ø³Ø§ Ø¨Ø§Ø±Ø´ Ú©Ø§ Ù‚Ø·Ø±Û Ú¯Ø±Ø§ØŒ Ù…Ú¯Ø± Ø§Ø³ Ù†Û’ Ø®ÙˆØ¨ØµÙˆØ±Øª Ù¾Ú¾ÙˆÙ„ÙˆÚº Ú©Ùˆ Ù¾Ø§Ù†ÛŒ Ø¯ÛŒØ§Û”",
          "Ù¾Ø±Ø¬ÙˆØ´": "Ø¨ÛØ§Ø¯Ø± Ø³Ù¾Ø§ÛÛŒ ØªÛŒØ² Ø¯ÙˆÚ‘ØªØ§ Ø±ÛØ§ØŒ Ù†Ø¦ÛŒ Ù…ÛÙ… Ú©Û’ Ù„ÛŒÛ’ ØªÛŒØ§Ø±Û”",
          "ØºØµÛ": "Ø´Ø¯ÛŒØ¯ Ø´ÛŒØ± Ù†Û’ Ú¯ÛØ±ÛŒ Ø³Ø§Ù†Ø³ Ù„ÛŒÙ†Ø§ Ø³ÛŒÚ©Ú¾Ø§ Ø§ÙˆØ± Ø³Ú©ÙˆÙ† Ù¾Ø§ÛŒØ§Û”",
          "Ù¾Ø±Ø§Ù…Ù†": "Ù¾Ø±Ø³Ú©ÙˆÙ† Ø¬Ú¾ÛŒÙ„ Ù†Û’ ØµØ§Ù Ø¢Ø³Ù…Ø§Ù† Ú©ÛŒ Ø¹Ú©Ø³ Ø¨Ù†Ø¯ÛŒ Ú©ÛŒÛ”"
        },
        quotes: [
          "Ø®ÙˆØ´ÛŒ Ø§ÛŒÚ© Ú¯Ø±Ù… Ú©ØªØ§ ÛÛ’Û” â€“ Ú†Ø§Ø±Ù„Ø³ Ø§ÛŒÙ… Ø´Ù„Ø²",
          "Ø¯Ø±Ø¯ Ú©Û’ Ø¨Ú¾ÙˆÙ„ Ø¨Ú¾Ù„ÛŒÙˆÚº Ø³Û’ Ù†Ú©Ù„Ù†Û’ Ú©Ø§ ÙˆØ§Ø­Ø¯ Ø±Ø§Ø³ØªÛ Ù…Ø¹Ø§Ù Ú©Ø±Ù†Ø§ ÛÛ’Û” â€“ Ø¬Ø§Ù† Ú¯Ø±ÛŒÙ†",
          "ØªÙˆØ§Ù†Ø§Ø¦ÛŒ Ø§ÙˆØ± Ø§Ø³ØªÙ‚Ø§Ù…Øª ÛØ± Ú†ÛŒØ² Ú©Ùˆ ÙØªØ­ Ú©Ø±ØªÛŒ ÛÛ’Û” â€“ Ø¨ÛŒÙ†Ø¬Ù…Ù† ÙØ±ÛŒÙ†Ú©Ù„Ù†"
        ]
      },
      {
        question: "Ø¢Ù¾ Ú©Ùˆ Ø³Ø¨ Ø³Û’ Ø²ÛŒØ§Ø¯Û Ú©ÛŒØ§ ØªØ­Ø±ÛŒÚ© Ø¯ÛŒØªØ§ ÛÛ’ØŸ",
        answers: ["Ø®Ø§Ù†Ø¯Ø§Ù†", "Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ", "Ù…ÛÙ… Ø¬ÙˆØ¦ÛŒ", "Ø¯ÙˆØ³Ø±ÙˆÚº Ú©ÛŒ Ù…Ø¯Ø¯", "Ø³ÛŒÚ©Ú¾Ù†Ø§"],
        results: {
          "Ø®Ø§Ù†Ø¯Ø§Ù†": "Ø®Ø§Ù†Ø¯Ø§Ù† Ø¢Ù¾ Ú©Ø§ Ø³ÛØ§Ø±Ø§ Ø§ÙˆØ± Ø¢Ù¾ Ú©Û’ Ù¾Ø±ÙˆÚº Ú©ÛŒ Ø·Ø§Ù‚Øª ÛÛ’Û”",
          "Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ": "Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ù…Ø­Ù†Øª Ø§ÙˆØ± Ø¬Ø°Ø¨Û’ Ú©Ø§ Ù†ØªÛŒØ¬Û ÛÛ’Û”",
          "Ù…ÛÙ… Ø¬ÙˆØ¦ÛŒ": "Ø²Ù†Ø¯Ú¯ÛŒ Ø§ÛŒÚ© Ø¯Ù„Ú†Ø³Ù¾ Ø³ÙØ± ÛÛ’Û”",
          "Ø¯ÙˆØ³Ø±ÙˆÚº Ú©ÛŒ Ù…Ø¯Ø¯": "Ø¢Ù¾ Ú©ÛŒ Ù…ÛØ±Ø¨Ø§Ù†ÛŒ Ø¯Ù†ÛŒØ§ Ú©Ùˆ Ø¨ÛØªØ± Ø¨Ù†Ø§ØªÛŒ ÛÛ’Û”",
          "Ø³ÛŒÚ©Ú¾Ù†Ø§": "Ø¹Ù„Ù… ÙˆÛ Ø±ÙˆØ´Ù†ÛŒ ÛÛ’ Ø¬Ùˆ Ø¢Ù¾ Ú©Ø§ Ø±Ø§Ø³ØªÛ Ø±ÙˆØ´Ù† Ú©Ø±ØªÛŒ ÛÛ’Û”"
        },
        stories: {
          "Ø®Ø§Ù†Ø¯Ø§Ù†": "Ù¾Ø±Ù†Ø¯ÙˆÚº Ú©Ø§ Ø®Ø§Ù†Ø¯Ø§Ù† Ø§ÛŒÚ© Ø§ÛŒØ³Ø§ Ú¯Ú¾ÙˆÙ†Ø³Ù„Û Ø¨Ù†Ø§ÛŒØ§ Ø¬ÛØ§Úº Ù…Ø­Ø¨Øª ØªÚ¾ÛŒÛ”",
          "Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ": "Ø§ÛŒÚ© Ú†Ú¾ÙˆÙ¹Ø§ Ø¨ÛŒØ¬ ØµØ¨Ø± Ø§ÙˆØ± Ø¯ÛŒÚ©Ú¾ Ø¨Ú¾Ø§Ù„ Ø³Û’ Ø¨Ú‘Ø§ Ø¯Ø±Ø®Øª Ø¨Ù†Ø§Û”",
          "Ù…ÛÙ… Ø¬ÙˆØ¦ÛŒ": "Ø§ÛŒÚ© ØªØ¬Ø³Ø³ Ø¨Ú¾Ø±ÛŒ Ø¨Ù„ÛŒ Ù†Û’ Ø§Ù¾Ù†Û’ Ú¯Ú¾Ø± Ø³Û’ Ø¨Ø§ÛØ± Ø¬Ù†Ú¯Ù„ Ú©ÛŒ Ø³ÛŒØ± Ú©ÛŒÛ”",
          "Ø¯ÙˆØ³Ø±ÙˆÚº Ú©ÛŒ Ù…Ø¯Ø¯": "Ø§ÛŒÚ© Ù…Ø¯Ø¯Ú¯Ø§Ø± ÛØ§ØªÚ¾ Ù†Û’ Ø§Ø¬Ù†Ø¨ÛŒ Ú©ÛŒ Ø²Ù†Ø¯Ú¯ÛŒ Ø¨Ø¯Ù„ Ø¯ÛŒÛ”",
          "Ø³ÛŒÚ©Ú¾Ù†Ø§": "ÛÙˆØ´ÛŒØ§Ø± Ø§Ù„Ùˆ Ù†Û’ Ú†Ø§Ù†Ø¯Ù†ÛŒ Ø±Ø§Øª Ù…ÛŒÚº Ú©ØªØ§Ø¨ÛŒÚº Ù¾Ú‘Ú¾ÛŒÚºÛ”"
        },
        quotes: [
          "Ø­ÙˆØµÙ„Û Ø§ÙØ²Ø§Ø¦ÛŒ ÙˆÛ Ú†ÛŒØ² ÛÛ’ Ø¬Ùˆ Ø¢Ù¾ Ú©Ùˆ Ø´Ø±ÙˆØ¹ Ú©Ø±ØªÛŒ ÛÛ’Û” Ø¹Ø§Ø¯Øª ÙˆÛ ÛÛ’ Ø¬Ùˆ Ø¢Ù¾ Ú©Ùˆ Ø¬Ø§Ø±ÛŒ Ø±Ú©Ú¾ØªÛŒ ÛÛ’Û” â€“ Ø¬Ù… Ø±Ø§Ø¦Ù†",
          "Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ø¹Ø§Ù… Ø·ÙˆØ± Ù¾Ø± Ø§ÙÙ† Ù„ÙˆÚ¯ÙˆÚº Ú©Ùˆ Ù…Ù„ØªÛŒ ÛÛ’ Ø¬Ùˆ Ø§Ø³Û’ ØªÙ„Ø§Ø´ Ú©Ø±Ù†Û’ Ù…ÛŒÚº Ù…ØµØ±ÙˆÙ Ù†ÛÛŒÚº ÛÙˆØªÛ’Û” â€“ ÛÙ†Ø±ÛŒ ÚˆÛŒÙˆÚˆ ØªÚ¾ÙˆØ±Ùˆ",
          "Ø³Ø¨ Ø³Û’ Ø¨Ú‘ÛŒ Ù…ÛÙ… Ø¬ÙˆØ¦ÛŒ ÙˆÛ ÛÛ’ Ø¬Ùˆ Ø¢Ù¾ Ú©Û’ Ø®ÙˆØ§Ø¨ÙˆÚº Ú©ÛŒ Ø²Ù†Ø¯Ú¯ÛŒ Ú¯Ø²Ø§Ø±Ù†Ø§ ÛÛ’Û” â€“ Ø§ÙˆÙ¾Ø±Ø§ ÙˆÙ†ÙØ±ÛŒ"
        ]
      }
    ]
  };

  let currentLang = 'en';
  let questionIndex = 0;
  let selectedAnswer = null;
  let history = [];

  const questionEl = document.getElementById('question');
  const answersEl = document.getElementById('answers');
  const resultContainer = document.getElementById('result-container');
  const resultText = document.getElementById('result-text');
  const storyEl = document.getElementById('story');
  const backBtn = document.getElementById('back-btn');
  const nextBtn = document.getElementById('next-btn');
  const langSwitcher = document.getElementById('lang-switcher');
  const downloadBtn = document.getElementById('download-quote');
  const shareTwitter = document.getElementById('share-twitter');
  const shareWhatsapp = document.getElementById('share-whatsapp');

  function loadQuestion() {
    if (questionIndex >= data[currentLang].length) {
      questionIndex = 0; // loop questions
    }
    selectedAnswer = null;
    const q = data[currentLang][questionIndex];
    questionEl.textContent = q.question;
    answersEl.innerHTML = '';
    q.answers.forEach(ans => {
      const btn = document.createElement('button');
      btn.textContent = ans;
      btn.onclick = () => {
        selectedAnswer = ans;
        showResult();
      };
      answersEl.appendChild(btn);
    });
    resultContainer.style.display = 'none';
    questionEl.parentElement.style.display = 'block';
  }

  function showResult() {
    if (!selectedAnswer) return;
    const q = data[currentLang][questionIndex];
    questionEl.parentElement.style.display = 'none';
    resultContainer.style.display = 'block';

    resultText.textContent = q.results[selectedAnswer];
    storyEl.textContent = q.stories[selectedAnswer];

    // Show random quote
    const quotes = q.quotes;
    const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
    storyEl.textContent += "\n\nQuote:\n" + randomQuote;

    history.push({ questionIndex, selectedAnswer });
    runConfetti();
  }

  backBtn.onclick = () => {
    if (history.length > 1) {
      history.pop(); // remove current
      const last = history.pop(); // get previous
      if (last) {
        questionIndex = last.questionIndex;
        selectedAnswer = last.selectedAnswer;
        loadQuestion();
        if (selectedAnswer) {
          showResult();
        }
      }
    } else {
      // no history, go to first question
      questionIndex = 0;
      loadQuestion();
    }
  };

  nextBtn.onclick = () => {
    questionIndex++;
    loadQuestion();
  };

  langSwitcher.onclick = () => {
    currentLang = currentLang === 'en' ? 'ur' : 'en';
    langSwitcher.textContent = currentLang === 'en' ? 'Switch to Urdu' : 'Switch to English';
    questionIndex = 0;
    history = [];
    loadQuestion();
  };

  // Download quote as image
  downloadBtn.onclick = () => {
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = 700;
    canvas.height = 300;
    ctx.fillStyle = '#764ba2';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.font = '22px Poppins';
    ctx.fillStyle = 'white';
    ctx.textAlign = 'center';
    const lines = resultText.textContent.split('\n');
    lines.forEach((line, i) => {
      ctx.fillText(line, canvas.width / 2, 60 + i * 30);
    });
    ctx.font = '18px Poppins';
    ctx.fillText(storyEl.textContent, canvas.width / 2, 150);
    const link = document.createElement('a');
    link.download = 'emotion-quote.png';
    link.href = canvas.toDataURL();
    link.click();
  };

  // Share buttons
  shareTwitter.onclick = () => {
    const text = encodeURIComponent(resultText.textContent + " #EmotionEcho");
    window.open(`https://twitter.com/intent/tweet?text=${text}`, '_blank');
  };
  shareWhatsapp.onclick = () => {
    const text = encodeURIComponent(resultText.textContent + " #EmotionEcho");
    window.open(`https://wa.me/?text=${text}`, '_blank');
  };

  // Confetti animation code (simple)
  function runConfetti() {
    const confettiCanvas = document.getElementById('confetti-canvas');
    const ctx = confettiCanvas.getContext('2d');
    confettiCanvas.width = window.innerWidth;
    confettiCanvas.height = window.innerHeight;

    let confettiPieces = [];
    const colors = ['#ff5f6d', '#ffc371', '#35c5f0', '#764ba2', '#5a3ea1'];

    class ConfettiPiece {
      constructor() {
        this.x = Math.random() * confettiCanvas.width;
        this.y = Math.random() * confettiCanvas.height - confettiCanvas.height;
        this.size = 8 + Math.random() * 6;
        this.color = colors[Math.floor(Math.random() * colors.length)];
        this.speed = 2 + Math.random() * 3;
        this.angle = Math.random() * 2 * Math.PI;
        this.spin = 0.1 + Math.random() * 0.3;
      }
      update() {
        this.y += this.speed;
        this.x += Math.sin(this.angle) * 2;
        this.angle += this.spin;
        if (this.y > confettiCanvas.height) this.y = 0;
      }
      draw(ctx) {
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.ellipse(this.x, this.y, this.size, this.size / 2, this.angle, 0, 2 * Math.PI);
        ctx.fill();
      }
    }

    confettiPieces = [];
    for (let i = 0; i < 80; i++) {
      confettiPieces.push(new ConfettiPiece());
    }

    let frame = 0;
    function animate() {
      frame++;
      ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
      confettiPieces.forEach(p => {
        p.update();
        p.draw(ctx);
      });
      if (frame < 200) {
        requestAnimationFrame(animate);
      } else {
        ctx.clearRect(0, 0
